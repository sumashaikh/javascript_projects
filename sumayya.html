<!DOCTYPE html>
<html>
<head>
	    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

</head>
<body>
<nav class="navbar navbar-dark bg-dark">
  <div class="container-fluid">
    <form class="d-flex">
      <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" id="searchText">
      <button class="btn btn-outline-success" type="submit">Search</button>
    </form>
  </div>
</nav>
<div class="contaner">
   <div class="card" style="width: 100rem;">
      <div class="card-body">
          <div class="my-3">
           <textarea class="form-control" id="addTitle" rows="3"></textarea>
         </div>
         <button class="btn btn-primary" id="addBtnt">AddTitle</button>
         <div class="my-3">
           <textarea class="form-control" id="addText" rows="3"></textarea>
         </div>
         <button class="btn btn-primary" id="addBtn">AddNotes</button>
      </div>
   </div>
      <hr>
        <h1>Your Notes</h1>
        <hr>
        <div id="notes" class="row container-fluid"> </div>
    </div>

</div>  

</body>
   <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous">
  </script>

   <script type="text/javascript">
    showNotes();
  let addBtn=document.getElementById("addBtn");
     addBtn.addEventListener("click",function(e)
    {
      let addText=document.getElementById("addText");
      let notes=localStorage.getItem("notes");
         if(notes==null){
          notesObj=[];
         }
         else
         {
          notesObj=JSON.parse(notes);
         }
      notesObj.push(addText.value);
      localStorage.setItem("notes", JSON.stringify(notesObj));
      addText.value='';
      console.log(notesObj);
        showNotes();
    });
     function showNotes()
     {
      let addText=document.getElementById("addText");
      let notes=localStorage.getItem("notes");
         if(notes==null){
          notesObj=[];
         }
         else
         {
          notesObj=JSON.parse(notes);
         }
         let html="";
         notesObj.forEach(function(element,index){

                   html +=` <div class="noteCard my-2 mx-2 card" style="width: 18rem;">
                             <div class="card-body">
                               <h5 class="card-title">Note ${index + 1}</h5>
                               <p class="card-text"> ${element}</p>
                               <button id="${index}"onclick="deleteNote(this.id)" class="btn btn-primary">Delete Note</button>
                             </div>
                           </div>`;

           }); 
  let notesElm = document.getElementById("notes");
  if (notesObj.length != 0) {
    notesElm.innerHTML = html;
  } else {
    notesElm.innerHTML = `Nothing to show! Use "Add a Note" section above to add notes.`;
  }
}

function deleteNote(index){
   //console.log(index);
         let notes=localStorage.getItem("notes");
         if(notes==null){
          notesObj=[];
         }
         else
         {
          notesObj=JSON.parse(notes);
         }
         
        notesObj.splice(index,1)
        localStorage.setItem("notes", JSON.stringify(notesObj));
        console.log(notesObj);
        showNotes();
     


}
let search=document.getElementById("searchText");
search.addEventListener("input",function(){
  let inputVal=search.value;
  //console.log(inputVal);
  let noteCard=document.getElementsByClassName('noteCard');
      Array.from(noteCard).forEach(function(element){
        let cardTxt = element.getElementsByTagName("p")[0].innerText;
          if(cardTxt.includes(inputVal)){
            element.style.display = "block";
            element.style.backgroundColor = 'red';


            }
          else{
            element.style.display = "none";
            }

        console.log(cardTxt);
      })
      
})

</script>
</html>
